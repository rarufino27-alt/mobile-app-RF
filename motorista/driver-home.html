<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RF â€“ Painel Motorista</title>

<style>
:root{
  --preto:#0f0f0f;
  --verde:#22c55e;
  --vermelho:#ef4444;
  --branco:#ffffff;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background:#111;
  color:#fff;
  overflow:hidden;
}

/* MAPA */
#map{
  position:absolute;
  inset:0;
  background:#1c1c1c;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
  opacity:.5;
}

/* RADAR */

.radar-container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:150px;
  height:150px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.radar-center{
  width:30px;
  height:30px;
  background:#22c55e;
  border-radius:50%;
  z-index:3;
}

.radar-wave{
  position:absolute;
  width:150px;
  height:150px;
  border-radius:50%;
  border:2px solid rgba(34,197,94,0.4);
  animation: radar 2.5s infinite;
}

.radar-wave:nth-child(2){
  animation-delay:1s;
}

@keyframes radar{
  0%{
    transform:scale(0.3);
    opacity:1;
  }
  100%{
    transform:scale(1.5);
    opacity:0;
  }
}

/* TEXTO PROCURANDO */
.procurando-texto{
  position:absolute;
  bottom:120px;
  left:50%;
  transform:translateX(-50%);
  background:#000;
  padding:12px 25px;
  border-radius:25px;
  font-weight:600;
  font-size:14px;
}

/* BOTÃƒO RESUMO */
.btn-resumo{
  position:absolute;
  right:20px;
  bottom:110px;
  width:50px;
  height:50px;
  border-radius:50%;
  background:#fff;
  color:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  cursor:pointer;
}

/* BOTÃƒO OFFLINE */
.btn-offline{
  position:absolute;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  background:var(--vermelho);
  color:#fff;
  padding:18px 35px;
  border:none;
  border-radius:30px;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
}

/* TELA OFFLINE */
.offline{
  position:absolute;
  inset:0;
  background:#0f0f0f;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:20px;
}

.btn-online{
  background:var(--verde);
  padding:18px 35px;
  border:none;
  border-radius:30px;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
}

.hidden{
  display:none;
}

</style>
</head>
<body>

<!-- MAPA -->
<div id="map">Mapa serÃ¡ integrado aqui</div>

<!-- ONLINE AREA -->
<div id="onlineArea">

  <div class="radar-container">
    <div class="radar-wave"></div>
    <div class="radar-wave"></div>
    <div class="radar-center"></div>
  </div>

  <div class="procurando-texto">
    Procurando viagens...
  </div>

  <div class="btn-resumo" onclick="abrirResumo()">ðŸ“Š</div>

  <button class="btn-offline" onclick="ficarOffline()">
    Ficar Offline
  </button>

</div>

<!-- OFFLINE AREA -->
<div id="offlineArea" class="offline hidden">

  <h2>VocÃª estÃ¡ offline</h2>

  <button class="btn-online" onclick="ficarOnline()">
    Ficar Online
  </button>

</div>

<script>

let online = localStorage.getItem("driver_online") === "true";

// ===== SIMULAÃ‡ÃƒO DE CORRIDA =====

let simulacaoTimeout = null;

function iniciarSimulacao(){
  simulacaoTimeout = setTimeout(()=>{
    gerarCorridaSimulada();
  },5000);
}

function pararSimulacao(){
  clearTimeout(simulacaoTimeout);
}

function gerarCorridaSimulada(){

  const corrida = {
    passageiro:"Carlos",
    origem:"FarmÃ¡cia Central",
    destino:"Rua das Flores",
    valor:12.00,
    forma_pagamento:"Dinheiro"
  };

  localStorage.setItem("corrida_ativa", JSON.stringify(corrida));

  tocarSom();
  vibrar();

  window.location.href="indo-ate-passageiro.html";
}

function tocarSom(){
  const audio = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
  audio.play();
}

function vibrar(){
  if(navigator.vibrate){
    navigator.vibrate([200,100,200]);
  }
}

function atualizarTela(){
  if(online){
    document.getElementById("onlineArea").classList.remove("hidden");
    document.getElementById("offlineArea").classList.add("hidden");
  }else{
    document.getElementById("onlineArea").classList.add("hidden");
    document.getElementById("offlineArea").classList.remove("hidden");
  }
}

function ficarOnline(){
  online=true;
  localStorage.setItem("driver_online","true");
  atualizarTela();
  iniciarSimulacao();
}

function ficarOffline(){
  online=false;
  localStorage.setItem("driver_online","false");
  pararSimulacao();
  atualizarTela();
}

function abrirResumo(){
  window.location.href="resumo.html";
}

atualizarTela();

</script>

</body>
</html>