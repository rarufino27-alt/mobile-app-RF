<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RF Driver - A Caminho</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  background:#000;
  color:#fff;
  height:100vh;
  display:flex;
  flex-direction:column;
}

/* HEADER */
.header{
  height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:1.1rem;
  border-bottom:1px solid #222;
}

/* MAPA */
.mapa{
  height:40%;
  background:linear-gradient(#1a1a1a,#000);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#facc15;
  font-weight:700;
}

/* CONTEÃšDO */
.content{
  flex:1;
  background:#111;
  padding:25px;
  border-top-left-radius:25px;
  border-top-right-radius:25px;
}

.status{
  font-size:.9rem;
  color:#aaa;
  margin-bottom:15px;
}

.valor{
  font-size:1.8rem;
  font-weight:900;
  margin-bottom:20px;
}

.rota div{
  margin-bottom:10px;
  font-size:1rem;
}

/* CRONÃ”METRO */
.cronometro{
  margin-top:15px;
  color:#888;
  font-size:.9rem;
}

/* BOTÃ•ES */
.btn{
  width:100%;
  padding:15px;
  margin-top:15px;
  border:none;
  border-radius:30px;
  font-weight:900;
  font-size:1rem;
  cursor:pointer;
}

.btn-cheguei{
  background:#facc15;
  color:#000;
}

.btn-cancelar{
  background:#222;
  color:#fff;
  border:1px solid #333;
}
</style>
</head>

<body>

<div class="header">
  ðŸš• A caminho do passageiro
</div>

<div class="mapa">
  Indo atÃ© o passageiro...
</div>

<div class="content">

  <div class="status">
    Dirija com seguranÃ§a atÃ© o ponto de embarque
  </div>

  <div class="valor">
    R$ <span id="valorCorrida">0</span>
  </div>

  <div class="rota">
    <div><strong>Origem:</strong> <span id="origemCorrida"></span></div>
    <div><strong>Destino:</strong> <span id="destinoCorrida"></span></div>
  </div>

  <div class="cronometro">
    Tempo em deslocamento: <span id="tempo">00:00</span>
  </div>

  <button class="btn btn-cheguei" onclick="cheguei()">
    CHEGUEI
  </button>

  <button class="btn btn-cancelar" onclick="cancelar()">
    CANCELAR CORRIDA
  </button>

</div>

<script>

// ================= CARREGAR CORRIDA =================

const corrida = JSON.parse(localStorage.getItem("rf_corrida_aceita"));

if(!corrida){
  alert("Nenhuma corrida ativa.");
  window.location.href = "driver-home.html";
}

document.getElementById("valorCorrida").innerText = corrida.valor;
document.getElementById("origemCorrida").innerText = corrida.origem;
document.getElementById("destinoCorrida").innerText = corrida.destino;

// ================= CRONÃ”METRO =================

let segundos = 0;

function atualizarCronometro(){
  segundos++;

  const min = String(Math.floor(segundos / 60)).padStart(2,'0');
  const seg = String(segundos % 60).padStart(2,'0');

  document.getElementById("tempo").innerText = `${min}:${seg}`;
}

setInterval(atualizarCronometro, 1000);

// ================= AÃ‡Ã•ES =================

function cheguei(){
  localStorage.setItem("rf_status_corrida", "aguardando");
  window.location.href = "motorista-em-viagem.html";
}

function cancelar(){

  if(confirm("Tem certeza que deseja cancelar a corrida?")){
    localStorage.removeItem("rf_corrida_aceita");
    localStorage.removeItem("rf_status_corrida");
    window.location.href = "driver-home.html";
  }

}

</script>

</body>
</html>
