<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Procurando motorista</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --rf-gold:#D6B85F;
  --rf-gold-strong:#F0D98A;
  --rf-bg:#0A0D14;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;}

body{
  background: radial-gradient(circle at top,#1A2133 0%,#080A12 70%);
  color:#fff;
  overflow:hidden;
  animation:fadeIn .4s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:scale(1.02);}
  to{opacity:1;transform:scale(1);}
}

.header{
  padding:20px;
  font-weight:700;
  font-size:15px;
}

.resumo{
  margin:0 20px;
  padding:18px;
  border-radius:18px;
  background:#151B2B;
  border:1px solid rgba(214,184,95,.2);
  font-size:14px;
}

.radar-area{
  height:260px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}

.radar{
  width:220px;
  height:220px;
  border-radius:50%;
  border:2px solid rgba(214,184,95,.6);
  position:absolute;
}

.radar::before,
.radar::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  border:2px solid rgba(214,184,95,.4);
  animation:pulse 3s infinite;
}

.radar::after{animation-delay:1.5s;}

@keyframes pulse{
  0%{transform:scale(.8);opacity:.8;}
  100%{transform:scale(1.6);opacity:0;}
}

.status-text{
  position:absolute;
  font-size:16px;
  color:var(--rf-gold-strong);
  text-align:center;
}

.oferta-box{
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
}

.oferta-box span{
  font-size:14px;
  opacity:.8;
}

.oferta-valor{
  font-size:20px;
  color:var(--rf-gold-strong);
  margin:6px 0;
}

.oferta-box button{
  padding:6px 12px;
  margin:0 5px;
  border:none;
  border-radius:10px;
  background:#1E2638;
  color:#fff;
  font-size:12px;
}

.motorista-card{
  position:fixed;
  bottom:-350px;
  width:100%;
  background:#151B2B;
  border-top-left-radius:30px;
  border-top-right-radius:30px;
  padding:25px;
  transition:.6s ease;
}

.motorista-card.ativo{
  bottom:0;
}

.motorista-info{
  display:flex;
  align-items:center;
  gap:15px;
}

.motorista-info img{
  width:60px;
  height:60px;
  border-radius:50%;
}

.motorista-actions{
  margin-top:15px;
  display:flex;
  gap:10px;
}

.motorista-actions button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:20px;
  font-weight:600;
}

.aceitar{
  background:linear-gradient(135deg,var(--rf-gold),var(--rf-gold-strong));
}

.recusar{
  background:#1E2638;
  color:#fff;
}

.cancelar{
  margin:20px;
  padding:14px;
  width:calc(100% - 40px);
  border:none;
  border-radius:30px;
  background:#1E2638;
  color:#fff;
}
</style>
</head>

<body>

<div class="header">Procurando motorista</div>

<div class="resumo" id="resumoCorrida"></div>

<div class="radar-area">
  <div class="radar"></div>
  <div class="status-text" id="statusText">
    Aguardando propostas...
  </div>

  <div class="oferta-box">
    <span>Sua oferta atual</span>
    <div class="oferta-valor" id="ofertaValor">R$ 0,00</div>
    <button onclick="aumentar(2)">+2</button>
    <button onclick="aumentar(5)">+5</button>
    <button onclick="aumentar(10)">+10</button>
  </div>
</div>

<div class="motorista-card" id="motoristaCard">
  <div class="motorista-info">
    <img id="fotoMotorista" src="">
    <div id="infoMotorista"></div>
  </div>
  <div class="motorista-actions">
    <button class="aceitar" onclick="aceitar()">Aceitar</button>
    <button class="recusar" onclick="recusar()">Recusar</button>
  </div>
</div>

<button class="cancelar" onclick="cancelarCorrida()">Cancelar solicitação</button>

<script>

const corrida = JSON.parse(localStorage.getItem("rf_corrida_temp"));
if(!corrida) window.location.href="home.html";

let ofertaAtual = Number(corrida.total);
let motoristaAtual = null;

document.getElementById("resumoCorrida").innerHTML=`
<strong>Origem:</strong> ${corrida.origem}<br>
${corrida.parada?`<strong>Parada:</strong> ${corrida.parada}<br>`:""}
<strong>Destino:</strong> ${corrida.destino}<br>
<strong>Total base:</strong> R$ ${corrida.total.toFixed(2)}
`;

function atualizarOferta(){
  document.getElementById("ofertaValor").innerText =
    "R$ " + ofertaAtual.toFixed(2);
}
atualizarOferta();

function aumentar(v){
  ofertaAtual += v;
  atualizarOferta();
  gerarMotorista();
}

function gerarMotorista(){

  const nomes=["João Silva","Carlos Lima","Marcos Souza","Pedro Henrique"];
  const carros=["Corolla Preto","Onix Branco","HB20 Prata","Virtus Cinza"];

  const nome = nomes[Math.floor(Math.random()*nomes.length)];
  const carro = carros[Math.floor(Math.random()*carros.length)];
  const tempo = Math.floor(Math.random()*6)+2;
  const valorAceito = ofertaAtual + (Math.random()*6).toFixed(2);

  motoristaAtual = {
    nome,
    carro,
    tempo,
    valor: Number(valorAceito)
  };

  document.getElementById("statusText").innerText="Nova proposta recebida!";
  document.getElementById("fotoMotorista").src="https://i.pravatar.cc/100?u="+nome;
  document.getElementById("infoMotorista").innerHTML=`
    <strong>${nome}</strong><br>
    ${carro}<br>
    Chega em ${tempo} min<br>
    Aceita por R$ ${motoristaAtual.valor.toFixed(2)}
  `;

  document.getElementById("motoristaCard").classList.add("ativo");
}

function aceitar(){
  if(!motoristaAtual) return;
  corrida.valorFinal = motoristaAtual.valor;
  localStorage.setItem("rf_corrida_temp", JSON.stringify(corrida));
  window.location.href="corrida.html";
}

function recusar(){
  document.getElementById("motoristaCard").classList.remove("ativo");
  document.getElementById("statusText").innerText="Aguardando novas propostas...";
}

function cancelarCorrida(){
  localStorage.removeItem("rf_corrida_temp");
  window.location.href="home.html";
}

setTimeout(gerarMotorista,4000);

</script>

</body>
</html>